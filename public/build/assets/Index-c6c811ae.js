import{r,y as E,j as e,a as G}from"./app-ab501295.js";import{C as J}from"./Container-a11237dd.js";import{D as K}from"./DangerButton-31f28158.js";import{A as Q}from"./App-e92a9362.js";import{A as X,E as Z,D as ee,T as g}from"./EditModal-3bedcf87.js";import{l as R}from"./lodash-18416f7f.js";import te from"./Create-1edce507.js";import se from"./Edit-edd81857.js";import{T as I}from"./TextInput-6f65be1e.js";import{I as P}from"./InputLabel-b3b06ced.js";import"./TextInputCheckbox-30883270.js";import"./ApplicationLogo-3c154252.js";import"./transition-fc840e5d.js";import"./dialog-22b0965e.js";import"./Form-6dad7138.js";import"./InputError-5bed4518.js";import"./PrimaryButton-e3007bc1.js";import"./SecondaryButton-375f8a79.js";const f=()=>e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})}),h=()=>e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})});function ae(n){const{data:d,meta:j,filtered:A,attributes:o}=n.users,w=n.roles,[B,O]=r.useState([]),[s,c]=r.useState(A),[b,u]=r.useState(!1),[y,m]=r.useState(!1),[U,p]=r.useState(!1),[$,z]=r.useState(!1),[v,N]=r.useState([]),[L,M]=r.useState(!0);var x=new Date;x.setDate(x.getDate());var k=x.toISOString().substring(0,10);const F=r.useCallback(R.debounce(t=>{E.get(route(route().current()),{...R.pickBy(t),page:t.page},{preserveState:!0,preserveScroll:!0})},300),[]);r.useEffect(()=>{L?M(!1):F(s)},[s]),r.useEffect(()=>{let t=[];for(let a=o.per_page;a<o.total/o.per_page;a=a+o.per_page)t.push(a);O(t)},[]);const l=t=>{const a={...s,[t.target.name]:t.target.value,page:1};c(a)},C=t=>{c({...s,field:t,direction:s.direction=="asc"?"desc":"asc"})},[i,D]=r.useState(null),[re,S]=r.useState(null),T=t=>{D(i===t?null:t)},q=()=>{u(!0)},_=t=>{N(t),S(t),m(!0)},V=t=>{N(t),S(t),p(!0)},H=()=>{E.delete(route("users.destroy",v.id),{onSuccess:()=>p(!1)})};return e.jsxs(e.Fragment,{children:[e.jsx(G,{title:"User"}),e.jsx(X,{isOpenAddDialog:b,setIsOpenAddDialog:u,size:"max-w-4xl",title:"Tambah User",children:e.jsx(te,{roles:w,enabled:$,setEnabled:z,isOpenAddDialog:b,setIsOpenAddDialog:u})}),e.jsx(Z,{isOpenEditDialog:y,setIsOpenEditDialog:m,size:"max-w-4xl",title:"Edit User",children:e.jsx(se,{roles:w,model:v,isOpenEditDialog:y,setIsOpenEditDialog:m})}),e.jsx(ee,{isOpenDestroyDialog:U,setIsOpenDestroyDialog:p,size:"max-w-4xl",title:"Delete User",warning:"Yakin hapus data ini ?",children:e.jsx(K,{className:"ml-2",onClick:H,children:"Delete"})}),e.jsxs(J,{children:[e.jsxs("div",{className:"p-1 space-x-4 overflow-x-auto bg-white rounded md:flex whitespace-nowrap",children:[e.jsx("button",{className:`w-32 md:w-full rounded py-2.5 text-sm font-medium leading-5 transition-all duration-300 ${s.jenis=="semuadata"?"bg-blue-300 ring-blue-300":"bg-gray-300 ring-gray-300"} text-white ring-2  ring-opacity-60 ring-offset-2 ring-offset-white focus:outline-none focus:ring-2`,type:"button",name:"jenis",value:"semuadata",onClick:l,children:"Semua Data"}),e.jsx("button",{className:`w-32 md:w-full rounded py-2.5 text-sm font-medium leading-5 transition-all duration-300 ${s.jenis=="belumperiksa"?"bg-blue-300 ring-blue-300":"bg-gray-300 ring-gray-300"} text-white ring-2  ring-opacity-60 ring-offset-2 ring-offset-white focus:outline-none focus:ring-2`,type:"button",name:"jenis",value:"belumperiksa",onClick:l,children:"Belum Periksa"}),e.jsx("button",{className:`w-32 md:w-full rounded py-2.5 text-sm font-medium leading-5 transition-all duration-300 ${s.jenis=="sudahperiksa"?"bg-blue-300 ring-blue-300":"bg-gray-300 ring-gray-300"} text-white ring-2  ring-opacity-60 ring-offset-2 ring-offset-white focus:outline-none focus:ring-2`,type:"button",name:"jenis",value:"sudahperiksa",onClick:l,children:"Sudah Periksa"}),e.jsx("button",{className:`w-32 md:w-full rounded py-2.5 text-sm font-medium leading-5 transition-all duration-300 ${s.jenis=="reservasi"?"bg-blue-300 ring-blue-300":"bg-gray-300 ring-gray-300"} text-white ring-2  ring-opacity-60 ring-offset-2 ring-offset-white focus:outline-none focus:ring-2`,type:"button",name:"jenis",value:"reservasi",onClick:l,children:"Reservasi"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-1/2",children:e.jsxs("div",{className:"flex items-center justify-start mt-2 mb-0 gap-x-1",children:[e.jsx(g,{color:"sky",type:"button",onClick:q,children:"Periksa"}),e.jsx(g,{color:i===null?"gray":"red",type:"button",className:`${i===null?"cursor-not-allowed":""}`,onClick:()=>{if(i!==null){const t=d[i];V(t)}},disabled:i===null,children:"Hapus"}),e.jsx(g,{color:i===null?"gray":"cyan",type:"button",className:`${i===null?"cursor-not-allowed":""}`,onClick:()=>{if(i!==null){const t=d[i];_(t)}},disabled:i===null,children:"Edit"})]})}),e.jsx("div",{className:"w-1/2",children:e.jsxs("div",{className:"flex items-center justify-end mt-4 mb-0 gap-x-1",children:[e.jsx(P,{htmlFor:"Periode",value:"Periode"}),e.jsx(I,{type:"date",id:"startdate",name:"startdate",defaultValue:k,className:"block w-1/4 ",autoComplete:"startdate",onChange:l,isFocused:!0,required:!0}),e.jsx(P,{htmlFor:"Sampai",value:"Sampai"}),e.jsx(I,{type:"date",id:"enddate",name:"enddate",defaultValue:k,className:"block w-1/4 ",autoComplete:"enddate",isFocused:!0,onChange:l,required:!0}),e.jsx("select",{name:"load",id:"load",onChange:l,value:s.load,className:"transition duration-150 ease-in-out border-gray-300 rounded focus:ring-blue-200 focus:ring form-select",children:B.map((t,a)=>e.jsx("option",{children:t},a))}),e.jsxs("div",{className:"flex items-center px-2 transition duration-150 ease-in-out bg-white border border-gray-300 rounded gap-x-2 focus-within:border-blue-400 focus-within:ring-blue-200 focus-within:ring",children:[e.jsx("svg",{className:"inline w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",autoComplete:"off",name:"q",id:"q",onChange:l,value:s.q,className:"w-full border-0 focus:ring-0 form-text"})]})]})})]}),e.jsx("div",{className:"flex flex-col",children:e.jsx("div",{className:"-my-2 rounded sm:-mx-6 lg:-mx-8",children:e.jsxs("div",{className:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8",children:[e.jsx("div",{className:"border border-gray-200 sm:rounded",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:e.jsx("div",{className:"flex items-center cursor-pointer gap-x-2",children:"#"})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:e.jsxs("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>C("name"),children:["Name",s.field=="name"&&s.direction=="asc"&&e.jsx(f,{}),s.field=="name"&&s.direction=="desc"&&e.jsx(h,{})]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:e.jsxs("div",{className:"flex items-center cursor-pointer gap-x-2",onClick:()=>C("email"),children:["Email",s.field=="email"&&s.direction=="asc"&&e.jsx(f,{}),s.field=="email"&&s.direction=="desc"&&e.jsx(h,{})]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:e.jsxs("div",{className:"flex items-center cursor-pointer gap-x-2",children:["Roles",s.field=="roles"&&s.direction=="asc"&&e.jsx(f,{}),s.field=="roles"&&s.direction=="desc"&&e.jsx(h,{})]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-800 uppercase",children:e.jsx("div",{className:"flex items-center cursor-pointer gap-x-2"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map((t,a)=>e.jsxs("tr",{className:i===a?"bg-sky-100  cursor-pointer":"cursor-pointer",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",onClick:()=>T(a),children:j.from+a}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.email}),e.jsx("td",{children:t.roles.map((W,Y)=>e.jsx("span",{className:"px-2 py-1 mx-1 text-xs text-blue-500 uppercase rounded-full bg-blue-50",children:W.name},Y))})]},a))})]})}),e.jsx("ul",{className:"flex items-center mt-4 gap-x-1",children:j.links.map((t,a)=>e.jsx("button",{disabled:t.url==null,className:`${t.url==null?"text-gray-500":"text-gray-800"} w-12 h-9 rounded flex items-center justify-center border bg-white`,onClick:()=>c({...s,page:new URL(t.url).searchParams.get("page")}),children:t.label},a))})]})})})]})]})}ae.layout=n=>e.jsx(Q,{children:n});export{ae as default};
